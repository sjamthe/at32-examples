ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"bsp_key.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text._ZL10IsKeyDown1v,"ax",%progbits
  17              		.align	1
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu fpv4-sp-d16
  23              	_ZL10IsKeyDown1v:
  24              		.fnstart
  25              	.LFB136:
  26              		.file 1 "bsp/src/bsp_key.c"
   1:bsp/src/bsp_key.c **** /**
   2:bsp/src/bsp_key.c ****   ******************************************************************************
   3:bsp/src/bsp_key.c ****   * @file    FreeRTOS/bsp/bsp_key.c 
   4:bsp/src/bsp_key.c ****   * @author  Artery Technology 
   5:bsp/src/bsp_key.c ****   * @version V1.1.2
   6:bsp/src/bsp_key.c ****   * @date    2019-01-04
   7:bsp/src/bsp_key.c ****   * @brief   Bsp Service Routines.
   8:bsp/src/bsp_key.c ****   ******************************************************************************
   9:bsp/src/bsp_key.c ****   * @attention
  10:bsp/src/bsp_key.c ****   *
  11:bsp/src/bsp_key.c ****   * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  12:bsp/src/bsp_key.c ****   * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  13:bsp/src/bsp_key.c ****   * TIME. AS A RESULT, ARTERYTEK SHALL NOT BE HELD LIABLE FOR ANY
  14:bsp/src/bsp_key.c ****   * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  15:bsp/src/bsp_key.c ****   * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  16:bsp/src/bsp_key.c ****   * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  17:bsp/src/bsp_key.c ****   *
  18:bsp/src/bsp_key.c ****   * <h2><center>&copy; COPYRIGHT 2018 ArteryTek</center></h2>
  19:bsp/src/bsp_key.c ****   ******************************************************************************
  20:bsp/src/bsp_key.c ****   */ 
  21:bsp/src/bsp_key.c **** 
  22:bsp/src/bsp_key.c **** /* Includes ------------------------------------------------------------------*/
  23:bsp/src/bsp_key.c **** #include "bsp.h"
  24:bsp/src/bsp_key.c **** 
  25:bsp/src/bsp_key.c **** /** @addtogroup AT32F403_StdPeriph_Examples
  26:bsp/src/bsp_key.c ****   * @{
  27:bsp/src/bsp_key.c ****   */
  28:bsp/src/bsp_key.c **** 
  29:bsp/src/bsp_key.c **** /** @addtogroup FreeRTOS_ResManagement_SafelyPrint
  30:bsp/src/bsp_key.c ****   * @{
  31:bsp/src/bsp_key.c ****   */ 
  32:bsp/src/bsp_key.c ****   
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 2


  33:bsp/src/bsp_key.c **** /* Private typedef -----------------------------------------------------------*/
  34:bsp/src/bsp_key.c **** /* Private define ------------------------------------------------------------*/  
  35:bsp/src/bsp_key.c **** #define RCC_ALL_KEY 	RCC_APB2PERIPH_GPIOA 
  36:bsp/src/bsp_key.c **** 
  37:bsp/src/bsp_key.c **** //High level is valid
  38:bsp/src/bsp_key.c **** #define GPIO_PORT_K1    GPIOA
  39:bsp/src/bsp_key.c **** #define GPIO_PIN_K1	    GPIO_Pins_0
  40:bsp/src/bsp_key.c **** 
  41:bsp/src/bsp_key.c **** /* Private macro -------------------------------------------------------------*/
  42:bsp/src/bsp_key.c **** /* Private variables ---------------------------------------------------------*/
  43:bsp/src/bsp_key.c **** static KEY_T s_tBtn[KEY_COUNT];
  44:bsp/src/bsp_key.c **** static KEY_FIFO_T s_tKey;		
  45:bsp/src/bsp_key.c **** 
  46:bsp/src/bsp_key.c **** /* Private function prototypes -----------------------------------------------*/
  47:bsp/src/bsp_key.c **** static void bsp_InitKeyVar(void);
  48:bsp/src/bsp_key.c **** static void bsp_InitKeyHard(void);
  49:bsp/src/bsp_key.c **** static void bsp_DetectKey(uint8_t i);
  50:bsp/src/bsp_key.c **** 
  51:bsp/src/bsp_key.c **** /* Private functions ---------------------------------------------------------*/
  52:bsp/src/bsp_key.c **** 
  53:bsp/src/bsp_key.c **** /**
  54:bsp/src/bsp_key.c ****   * @brief  Check key press
  55:bsp/src/bsp_key.c ****   * @param  None
  56:bsp/src/bsp_key.c ****   * @retval 1:pressed
  57:bsp/src/bsp_key.c ****             0:no pressed
  58:bsp/src/bsp_key.c ****   */
  59:bsp/src/bsp_key.c **** static uint8_t IsKeyDown1(void)
  60:bsp/src/bsp_key.c **** {
  27              		.loc 1 60 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  61:bsp/src/bsp_key.c **** 	if ((GPIO_PORT_K1->IPTDT & GPIO_PIN_K1) == 1)
  32              		.loc 1 61 0
  33 0000 044B     		ldr	r3, .L5
  34 0002 9B68     		ldr	r3, [r3, #8]
  35 0004 13F0010F 		tst	r3, #1
  36 0008 01D1     		bne	.L4
  62:bsp/src/bsp_key.c **** 		return 1;
  63:bsp/src/bsp_key.c **** 	else 
  64:bsp/src/bsp_key.c **** 		return 0;
  37              		.loc 1 64 0
  38 000a 0020     		movs	r0, #0
  65:bsp/src/bsp_key.c **** }
  39              		.loc 1 65 0
  40 000c 7047     		bx	lr
  41              	.L4:
  62:bsp/src/bsp_key.c **** 		return 1;
  42              		.loc 1 62 0
  43 000e 0120     		movs	r0, #1
  44 0010 7047     		bx	lr
  45              	.L6:
  46 0012 00BF     		.align	2
  47              	.L5:
  48 0014 00080140 		.word	1073809408
  49              		.cfi_endproc
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 3


  50              	.LFE136:
  51              		.cantunwind
  52              		.fnend
  54              		.section	.text._ZL14bsp_InitKeyVarv,"ax",%progbits
  55              		.align	1
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu fpv4-sp-d16
  61              	_ZL14bsp_InitKeyVarv:
  62              		.fnstart
  63              	.LFB144:
  66:bsp/src/bsp_key.c **** 
  67:bsp/src/bsp_key.c **** /**
  68:bsp/src/bsp_key.c ****   * @brief  Initialize key
  69:bsp/src/bsp_key.c ****   * @param  None
  70:bsp/src/bsp_key.c ****   * @retval None
  71:bsp/src/bsp_key.c ****   */
  72:bsp/src/bsp_key.c **** void bsp_InitKey(void)
  73:bsp/src/bsp_key.c **** {
  74:bsp/src/bsp_key.c **** 	bsp_InitKeyVar();		
  75:bsp/src/bsp_key.c **** 	bsp_InitKeyHard();		
  76:bsp/src/bsp_key.c **** }
  77:bsp/src/bsp_key.c **** 
  78:bsp/src/bsp_key.c **** /**
  79:bsp/src/bsp_key.c ****   * @brief  Store one key value to key FIFO
  80:bsp/src/bsp_key.c ****   * @param  _KeyCode:key value
  81:bsp/src/bsp_key.c ****   * @retval None
  82:bsp/src/bsp_key.c ****   */
  83:bsp/src/bsp_key.c **** void bsp_PutKey(uint8_t _KeyCode)
  84:bsp/src/bsp_key.c **** {
  85:bsp/src/bsp_key.c **** 	s_tKey.Buf[s_tKey.Write] = _KeyCode;
  86:bsp/src/bsp_key.c **** 
  87:bsp/src/bsp_key.c **** 	if (++s_tKey.Write  >= KEY_FIFO_SIZE)
  88:bsp/src/bsp_key.c **** 	{
  89:bsp/src/bsp_key.c **** 		s_tKey.Write = 0;
  90:bsp/src/bsp_key.c **** 	}
  91:bsp/src/bsp_key.c **** }
  92:bsp/src/bsp_key.c **** 
  93:bsp/src/bsp_key.c **** /**
  94:bsp/src/bsp_key.c ****   * @brief  Obtain one key value from key FIFO
  95:bsp/src/bsp_key.c ****   * @param  None
  96:bsp/src/bsp_key.c ****   * @retval ret:key value
  97:bsp/src/bsp_key.c ****   */
  98:bsp/src/bsp_key.c **** uint8_t bsp_GetKey(void)
  99:bsp/src/bsp_key.c **** {
 100:bsp/src/bsp_key.c **** 	uint8_t ret;
 101:bsp/src/bsp_key.c **** 
 102:bsp/src/bsp_key.c **** 	if (s_tKey.Read == s_tKey.Write)
 103:bsp/src/bsp_key.c **** 	{
 104:bsp/src/bsp_key.c **** 		return KEY_NONE;
 105:bsp/src/bsp_key.c **** 	}
 106:bsp/src/bsp_key.c **** 	else
 107:bsp/src/bsp_key.c **** 	{
 108:bsp/src/bsp_key.c **** 		ret = s_tKey.Buf[s_tKey.Read];
 109:bsp/src/bsp_key.c **** 
 110:bsp/src/bsp_key.c **** 		if (++s_tKey.Read >= KEY_FIFO_SIZE)
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 4


 111:bsp/src/bsp_key.c **** 		{
 112:bsp/src/bsp_key.c **** 			s_tKey.Read = 0;
 113:bsp/src/bsp_key.c **** 		}
 114:bsp/src/bsp_key.c **** 		return ret;
 115:bsp/src/bsp_key.c **** 	}
 116:bsp/src/bsp_key.c **** }
 117:bsp/src/bsp_key.c **** 
 118:bsp/src/bsp_key.c **** /**
 119:bsp/src/bsp_key.c ****   * @brief  Obtain key state
 120:bsp/src/bsp_key.c ****   * @param  _ucKeyID:key state to check
 121:bsp/src/bsp_key.c ****   * @retval Key state 1:pressed
 122:bsp/src/bsp_key.c ****                       0:no pressed
 123:bsp/src/bsp_key.c ****   */
 124:bsp/src/bsp_key.c **** uint8_t bsp_GetKeyState(KEY_ID_E _ucKeyID)
 125:bsp/src/bsp_key.c **** {
 126:bsp/src/bsp_key.c **** 	return s_tBtn[_ucKeyID].State;
 127:bsp/src/bsp_key.c **** }
 128:bsp/src/bsp_key.c **** 
 129:bsp/src/bsp_key.c **** void bsp_SetKeyParam(uint8_t _ucKeyID, uint16_t _LongTime, uint8_t  _RepeatSpeed)
 130:bsp/src/bsp_key.c **** {
 131:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].LongTime       = _LongTime;		//0: don't detect long pressed event
 132:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].RepeatSpeed    = _RepeatSpeed;		//0: don't support continuous send key value
 133:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].RepeatCount    = 0;						
 134:bsp/src/bsp_key.c **** }
 135:bsp/src/bsp_key.c **** 
 136:bsp/src/bsp_key.c **** 
 137:bsp/src/bsp_key.c **** /**
 138:bsp/src/bsp_key.c ****   * @brief  Clear key FIFO
 139:bsp/src/bsp_key.c ****   * @param  None
 140:bsp/src/bsp_key.c ****   * @retval None
 141:bsp/src/bsp_key.c ****   */
 142:bsp/src/bsp_key.c **** void bsp_ClearKey(void)
 143:bsp/src/bsp_key.c **** {
 144:bsp/src/bsp_key.c **** 	s_tKey.Read = s_tKey.Write;
 145:bsp/src/bsp_key.c **** }
 146:bsp/src/bsp_key.c **** 
 147:bsp/src/bsp_key.c **** /**
 148:bsp/src/bsp_key.c ****   * @brief  Initialize GPIO for keys
 149:bsp/src/bsp_key.c ****   * @param  None
 150:bsp/src/bsp_key.c ****   * @retval None
 151:bsp/src/bsp_key.c ****   */
 152:bsp/src/bsp_key.c **** static void bsp_InitKeyHard(void)
 153:bsp/src/bsp_key.c **** {
 154:bsp/src/bsp_key.c **** 	GPIO_InitType GPIO_InitStructure;
 155:bsp/src/bsp_key.c **** 
 156:bsp/src/bsp_key.c **** 	RCC_APB2PeriphClockCmd(RCC_ALL_KEY, ENABLE);
 157:bsp/src/bsp_key.c **** 
 158:bsp/src/bsp_key.c **** 	GPIO_InitStructure.GPIO_MaxSpeed    = GPIO_MaxSpeed_50MHz;
 159:bsp/src/bsp_key.c **** 	GPIO_InitStructure.GPIO_Mode        = GPIO_Mode_IN_PD;	
 160:bsp/src/bsp_key.c **** 	
 161:bsp/src/bsp_key.c **** 	GPIO_InitStructure.GPIO_Pins = GPIO_PIN_K1;
 162:bsp/src/bsp_key.c **** 	GPIO_Init(GPIO_PORT_K1, &GPIO_InitStructure);
 163:bsp/src/bsp_key.c **** }
 164:bsp/src/bsp_key.c **** 
 165:bsp/src/bsp_key.c **** /**
 166:bsp/src/bsp_key.c ****   * @brief  Initialize key and FIFO structure
 167:bsp/src/bsp_key.c ****   * @param  None
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 5


 168:bsp/src/bsp_key.c ****   * @retval None
 169:bsp/src/bsp_key.c ****   */
 170:bsp/src/bsp_key.c **** static void bsp_InitKeyVar(void)
 171:bsp/src/bsp_key.c **** {
  64              		.loc 1 171 0
  65              		.cfi_startproc
  66              		@ args = 0, pretend = 0, frame = 0
  67              		@ frame_needed = 0, uses_anonymous_args = 0
  68              		@ link register save eliminated.
 172:bsp/src/bsp_key.c **** 	uint8_t i;
 173:bsp/src/bsp_key.c **** 
 174:bsp/src/bsp_key.c **** 	//clear FIFO operation pointer
 175:bsp/src/bsp_key.c **** 	s_tKey.Read     = 0;
  69              		.loc 1 175 0
  70 0000 0B4A     		ldr	r2, .L10
  71 0002 0023     		movs	r3, #0
  72 0004 9372     		strb	r3, [r2, #10]
 176:bsp/src/bsp_key.c **** 	s_tKey.Write    = 0;
  73              		.loc 1 176 0
  74 0006 D372     		strb	r3, [r2, #11]
  75              	.LVL0:
  76              	.L9:
 177:bsp/src/bsp_key.c **** 
 178:bsp/src/bsp_key.c **** 	for (i = 0; i < KEY_COUNT; i++)
  77              		.loc 1 178 0 discriminator 3
  78 0008 6BB9     		cbnz	r3, .L8
 179:bsp/src/bsp_key.c **** 	{
 180:bsp/src/bsp_key.c **** 		s_tBtn[i].LongTime = KEY_LONG_TIME;			
  79              		.loc 1 180 0 discriminator 2
  80 000a 0A4A     		ldr	r2, .L10+4
  81 000c 02EB0312 		add	r2, r2, r3, lsl #4
  82 0010 6421     		movs	r1, #100
  83 0012 1181     		strh	r1, [r2, #8]	@ movhi
 181:bsp/src/bsp_key.c **** 		s_tBtn[i].Count = KEY_FILTER_TIME / 2;		
  84              		.loc 1 181 0 discriminator 2
  85 0014 0221     		movs	r1, #2
  86 0016 1171     		strb	r1, [r2, #4]
 182:bsp/src/bsp_key.c **** 		s_tBtn[i].State = 0;							
  87              		.loc 1 182 0 discriminator 2
  88 0018 0021     		movs	r1, #0
  89 001a 9172     		strb	r1, [r2, #10]
 183:bsp/src/bsp_key.c **** 		s_tBtn[i].RepeatSpeed = 0;						
  90              		.loc 1 183 0 discriminator 2
  91 001c D172     		strb	r1, [r2, #11]
 184:bsp/src/bsp_key.c **** 		s_tBtn[i].RepeatCount = 0;						
  92              		.loc 1 184 0 discriminator 2
  93 001e 1173     		strb	r1, [r2, #12]
 178:bsp/src/bsp_key.c **** 	{
  94              		.loc 1 178 0 discriminator 2
  95 0020 0133     		adds	r3, r3, #1
  96              	.LVL1:
  97 0022 DBB2     		uxtb	r3, r3
  98              	.LVL2:
  99 0024 F0E7     		b	.L9
 100              	.L8:
 185:bsp/src/bsp_key.c **** 	}
 186:bsp/src/bsp_key.c **** 
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 6


 187:bsp/src/bsp_key.c **** 	s_tBtn[KID_K1].IsKeyDownFunc = IsKeyDown1;
 101              		.loc 1 187 0
 102 0026 034B     		ldr	r3, .L10+4
 103              	.LVL3:
 104 0028 034A     		ldr	r2, .L10+8
 105 002a 1A60     		str	r2, [r3]
 188:bsp/src/bsp_key.c **** }
 106              		.loc 1 188 0
 107 002c 7047     		bx	lr
 108              	.L11:
 109 002e 00BF     		.align	2
 110              	.L10:
 111 0030 00000000 		.word	.LANCHOR0
 112 0034 00000000 		.word	.LANCHOR1
 113 0038 00000000 		.word	_ZL10IsKeyDown1v
 114              		.cfi_endproc
 115              	.LFE144:
 116              		.cantunwind
 117              		.fnend
 119              		.section	.text._ZL15bsp_InitKeyHardv,"ax",%progbits
 120              		.align	1
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 124              		.fpu fpv4-sp-d16
 126              	_ZL15bsp_InitKeyHardv:
 127              		.fnstart
 128              	.LFB143:
 153:bsp/src/bsp_key.c **** 	GPIO_InitType GPIO_InitStructure;
 129              		.loc 1 153 0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 8
 132              		@ frame_needed = 0, uses_anonymous_args = 0
 133 0000 00B5     		push	{lr}
 134              		.save {lr}
 135              	.LCFI0:
 136              		.cfi_def_cfa_offset 4
 137              		.cfi_offset 14, -4
 138              		.pad #12
 139 0002 83B0     		sub	sp, sp, #12
 140              	.LCFI1:
 141              		.cfi_def_cfa_offset 16
 156:bsp/src/bsp_key.c **** 
 142              		.loc 1 156 0
 143 0004 0121     		movs	r1, #1
 144 0006 0420     		movs	r0, #4
 145 0008 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 146              	.LVL4:
 158:bsp/src/bsp_key.c **** 	GPIO_InitStructure.GPIO_Mode        = GPIO_Mode_IN_PD;	
 147              		.loc 1 158 0
 148 000c 0223     		movs	r3, #2
 149 000e 8DF80630 		strb	r3, [sp, #6]
 159:bsp/src/bsp_key.c **** 	
 150              		.loc 1 159 0
 151 0012 2823     		movs	r3, #40
 152 0014 8DF80730 		strb	r3, [sp, #7]
 161:bsp/src/bsp_key.c **** 	GPIO_Init(GPIO_PORT_K1, &GPIO_InitStructure);
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 7


 153              		.loc 1 161 0
 154 0018 02A9     		add	r1, sp, #8
 155 001a 0123     		movs	r3, #1
 156 001c 21F8043D 		strh	r3, [r1, #-4]!	@ movhi
 162:bsp/src/bsp_key.c **** }
 157              		.loc 1 162 0
 158 0020 0248     		ldr	r0, .L14
 159 0022 FFF7FEFF 		bl	GPIO_Init
 160              	.LVL5:
 163:bsp/src/bsp_key.c **** 
 161              		.loc 1 163 0
 162 0026 03B0     		add	sp, sp, #12
 163              	.LCFI2:
 164              		.cfi_def_cfa_offset 4
 165              		@ sp needed
 166 0028 5DF804FB 		ldr	pc, [sp], #4
 167              	.L15:
 168              		.align	2
 169              	.L14:
 170 002c 00080140 		.word	1073809408
 171              		.cfi_endproc
 172              	.LFE143:
 173              		.fnend
 175              		.section	.text._Z11bsp_InitKeyv,"ax",%progbits
 176              		.align	1
 177              		.global	_Z11bsp_InitKeyv
 178              		.syntax unified
 179              		.thumb
 180              		.thumb_func
 181              		.fpu fpv4-sp-d16
 183              	_Z11bsp_InitKeyv:
 184              		.fnstart
 185              	.LFB137:
  73:bsp/src/bsp_key.c **** 	bsp_InitKeyVar();		
 186              		.loc 1 73 0
 187              		.cfi_startproc
 188              		@ args = 0, pretend = 0, frame = 0
 189              		@ frame_needed = 0, uses_anonymous_args = 0
 190 0000 08B5     		push	{r3, lr}
 191              		.save {r3, lr}
 192              	.LCFI3:
 193              		.cfi_def_cfa_offset 8
 194              		.cfi_offset 3, -8
 195              		.cfi_offset 14, -4
  74:bsp/src/bsp_key.c **** 	bsp_InitKeyHard();		
 196              		.loc 1 74 0
 197 0002 FFF7FEFF 		bl	_ZL14bsp_InitKeyVarv
 198              	.LVL6:
  75:bsp/src/bsp_key.c **** }
 199              		.loc 1 75 0
 200 0006 FFF7FEFF 		bl	_ZL15bsp_InitKeyHardv
 201              	.LVL7:
  76:bsp/src/bsp_key.c **** 
 202              		.loc 1 76 0
 203 000a 08BD     		pop	{r3, pc}
 204              		.cfi_endproc
 205              	.LFE137:
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 8


 206              		.fnend
 208              		.section	.text._Z10bsp_PutKeyh,"ax",%progbits
 209              		.align	1
 210              		.global	_Z10bsp_PutKeyh
 211              		.syntax unified
 212              		.thumb
 213              		.thumb_func
 214              		.fpu fpv4-sp-d16
 216              	_Z10bsp_PutKeyh:
 217              		.fnstart
 218              	.LFB138:
  84:bsp/src/bsp_key.c **** 	s_tKey.Buf[s_tKey.Write] = _KeyCode;
 219              		.loc 1 84 0
 220              		.cfi_startproc
 221              		@ args = 0, pretend = 0, frame = 0
 222              		@ frame_needed = 0, uses_anonymous_args = 0
 223              		@ link register save eliminated.
 224              	.LVL8:
  85:bsp/src/bsp_key.c **** 
 225              		.loc 1 85 0
 226 0000 054A     		ldr	r2, .L20
 227 0002 D37A     		ldrb	r3, [r2, #11]	@ zero_extendqisi2
 228 0004 D054     		strb	r0, [r2, r3]
  87:bsp/src/bsp_key.c **** 	{
 229              		.loc 1 87 0
 230 0006 0133     		adds	r3, r3, #1
 231 0008 DBB2     		uxtb	r3, r3
 232 000a D372     		strb	r3, [r2, #11]
 233 000c 092B     		cmp	r3, #9
 234 000e 02D9     		bls	.L18
  89:bsp/src/bsp_key.c **** 	}
 235              		.loc 1 89 0
 236 0010 1346     		mov	r3, r2
 237 0012 0022     		movs	r2, #0
 238 0014 DA72     		strb	r2, [r3, #11]
 239              	.L18:
  91:bsp/src/bsp_key.c **** 
 240              		.loc 1 91 0
 241 0016 7047     		bx	lr
 242              	.L21:
 243              		.align	2
 244              	.L20:
 245 0018 00000000 		.word	.LANCHOR0
 246              		.cfi_endproc
 247              	.LFE138:
 248              		.cantunwind
 249              		.fnend
 251              		.section	.text._ZL13bsp_DetectKeyh,"ax",%progbits
 252              		.align	1
 253              		.syntax unified
 254              		.thumb
 255              		.thumb_func
 256              		.fpu fpv4-sp-d16
 258              	_ZL13bsp_DetectKeyh:
 259              		.fnstart
 260              	.LFB145:
 189:bsp/src/bsp_key.c **** 
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 9


 190:bsp/src/bsp_key.c **** /**
 191:bsp/src/bsp_key.c ****   * @brief  Scan the specified key
 192:bsp/src/bsp_key.c ****   * @param  i:key num
 193:bsp/src/bsp_key.c ****   * @retval None
 194:bsp/src/bsp_key.c ****   */
 195:bsp/src/bsp_key.c **** static void bsp_DetectKey(uint8_t i)
 196:bsp/src/bsp_key.c **** {
 261              		.loc 1 196 0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265              	.LVL9:
 266 0000 10B5     		push	{r4, lr}
 267              		.save {r4, lr}
 268              	.LCFI4:
 269              		.cfi_def_cfa_offset 8
 270              		.cfi_offset 4, -8
 271              		.cfi_offset 14, -4
 272 0002 0446     		mov	r4, r0
 273              	.LVL10:
 197:bsp/src/bsp_key.c **** 	KEY_T *pBtn;
 198:bsp/src/bsp_key.c **** 
 199:bsp/src/bsp_key.c **** 	pBtn = &s_tBtn[i];
 200:bsp/src/bsp_key.c **** 	if (pBtn->IsKeyDownFunc())//key pressed
 274              		.loc 1 200 0
 275 0004 0301     		lsls	r3, r0, #4
 276 0006 434A     		ldr	r2, .L36
 277 0008 D358     		ldr	r3, [r2, r3]
 278 000a 9847     		blx	r3
 279              	.LVL11:
 280 000c 0028     		cmp	r0, #0
 281 000e 55D0     		beq	.L23
 201:bsp/src/bsp_key.c **** 	{
 202:bsp/src/bsp_key.c **** 		if (pBtn->Count < KEY_FILTER_TIME)
 282              		.loc 1 202 0
 283 0010 404B     		ldr	r3, .L36
 284 0012 03EB0413 		add	r3, r3, r4, lsl #4
 285 0016 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 286 0018 042B     		cmp	r3, #4
 287 001a 21D9     		bls	.L33
 203:bsp/src/bsp_key.c **** 		{
 204:bsp/src/bsp_key.c **** 			pBtn->Count = KEY_FILTER_TIME;
 205:bsp/src/bsp_key.c **** 		}
 206:bsp/src/bsp_key.c **** 		else if(pBtn->Count < 2 * KEY_FILTER_TIME)
 288              		.loc 1 206 0
 289 001c 092B     		cmp	r3, #9
 290 001e 25D9     		bls	.L34
 207:bsp/src/bsp_key.c **** 		{
 208:bsp/src/bsp_key.c **** 			pBtn->Count++;
 209:bsp/src/bsp_key.c **** 		}
 210:bsp/src/bsp_key.c **** 		else
 211:bsp/src/bsp_key.c **** 		{
 212:bsp/src/bsp_key.c **** 			if (pBtn->State == 0)
 291              		.loc 1 212 0
 292 0020 3C4B     		ldr	r3, .L36
 293 0022 03EB0413 		add	r3, r3, r4, lsl #4
 294 0026 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 10


 295 0028 33B3     		cbz	r3, .L35
 296              	.L27:
 213:bsp/src/bsp_key.c **** 			{
 214:bsp/src/bsp_key.c **** 				pBtn->State = 1;
 215:bsp/src/bsp_key.c **** 
 216:bsp/src/bsp_key.c **** 				
 217:bsp/src/bsp_key.c **** 				bsp_PutKey((uint8_t)(3 * i + 1));
 218:bsp/src/bsp_key.c **** 			}
 219:bsp/src/bsp_key.c **** 
 220:bsp/src/bsp_key.c **** 			if (pBtn->LongTime > 0)
 297              		.loc 1 220 0
 298 002a 3A4B     		ldr	r3, .L36
 299 002c 03EB0413 		add	r3, r3, r4, lsl #4
 300 0030 1B89     		ldrh	r3, [r3, #8]
 301 0032 002B     		cmp	r3, #0
 302 0034 53D0     		beq	.L22
 221:bsp/src/bsp_key.c **** 			{
 222:bsp/src/bsp_key.c **** 				if (pBtn->LongCount < pBtn->LongTime)
 303              		.loc 1 222 0
 304 0036 374A     		ldr	r2, .L36
 305 0038 02EB0412 		add	r2, r2, r4, lsl #4
 306 003c D288     		ldrh	r2, [r2, #6]
 307 003e 9342     		cmp	r3, r2
 308 0040 26D9     		bls	.L28
 223:bsp/src/bsp_key.c **** 				{
 224:bsp/src/bsp_key.c **** 					
 225:bsp/src/bsp_key.c **** 					if (++pBtn->LongCount == pBtn->LongTime)
 309              		.loc 1 225 0
 310 0042 0132     		adds	r2, r2, #1
 311 0044 92B2     		uxth	r2, r2
 312 0046 3349     		ldr	r1, .L36
 313 0048 01EB0411 		add	r1, r1, r4, lsl #4
 314 004c CA80     		strh	r2, [r1, #6]	@ movhi
 315 004e 9342     		cmp	r3, r2
 316 0050 45D1     		bne	.L22
 226:bsp/src/bsp_key.c **** 					{
 227:bsp/src/bsp_key.c **** 						
 228:bsp/src/bsp_key.c **** 						bsp_PutKey((uint8_t)(3 * i + 3));
 317              		.loc 1 228 0
 318 0052 0134     		adds	r4, r4, #1
 319              	.LVL12:
 320 0054 04EB4404 		add	r4, r4, r4, lsl #1
 321              	.LVL13:
 322 0058 E0B2     		uxtb	r0, r4
 323 005a FFF7FEFF 		bl	_Z10bsp_PutKeyh
 324              	.LVL14:
 325 005e 3EE0     		b	.L22
 326              	.LVL15:
 327              	.L33:
 204:bsp/src/bsp_key.c **** 		}
 328              		.loc 1 204 0
 329 0060 2C4B     		ldr	r3, .L36
 330 0062 03EB0414 		add	r4, r3, r4, lsl #4
 331              	.LVL16:
 332 0066 0523     		movs	r3, #5
 333 0068 2371     		strb	r3, [r4, #4]
 334 006a 38E0     		b	.L22
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 11


 335              	.LVL17:
 336              	.L34:
 208:bsp/src/bsp_key.c **** 		}
 337              		.loc 1 208 0
 338 006c 294A     		ldr	r2, .L36
 339 006e 02EB0414 		add	r4, r2, r4, lsl #4
 340              	.LVL18:
 341 0072 0133     		adds	r3, r3, #1
 342 0074 2371     		strb	r3, [r4, #4]
 343 0076 32E0     		b	.L22
 344              	.LVL19:
 345              	.L35:
 214:bsp/src/bsp_key.c **** 
 346              		.loc 1 214 0
 347 0078 264B     		ldr	r3, .L36
 348 007a 03EB0413 		add	r3, r3, r4, lsl #4
 349 007e 0122     		movs	r2, #1
 350 0080 9A72     		strb	r2, [r3, #10]
 217:bsp/src/bsp_key.c **** 			}
 351              		.loc 1 217 0
 352 0082 04EB4400 		add	r0, r4, r4, lsl #1
 353 0086 1044     		add	r0, r0, r2
 354 0088 C0B2     		uxtb	r0, r0
 355 008a FFF7FEFF 		bl	_Z10bsp_PutKeyh
 356              	.LVL20:
 357 008e CCE7     		b	.L27
 358              	.L28:
 229:bsp/src/bsp_key.c **** 					}
 230:bsp/src/bsp_key.c **** 				}
 231:bsp/src/bsp_key.c **** 				else
 232:bsp/src/bsp_key.c **** 				{
 233:bsp/src/bsp_key.c **** 					if (pBtn->RepeatSpeed > 0)
 359              		.loc 1 233 0
 360 0090 204B     		ldr	r3, .L36
 361 0092 03EB0413 		add	r3, r3, r4, lsl #4
 362 0096 D97A     		ldrb	r1, [r3, #11]	@ zero_extendqisi2
 363 0098 09B3     		cbz	r1, .L22
 234:bsp/src/bsp_key.c **** 					{
 235:bsp/src/bsp_key.c **** 						if (++pBtn->RepeatCount >= pBtn->RepeatSpeed)
 364              		.loc 1 235 0
 365 009a 1A46     		mov	r2, r3
 366 009c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 367 009e 0133     		adds	r3, r3, #1
 368 00a0 DBB2     		uxtb	r3, r3
 369 00a2 1373     		strb	r3, [r2, #12]
 370 00a4 9942     		cmp	r1, r3
 371 00a6 1AD8     		bhi	.L22
 236:bsp/src/bsp_key.c **** 						{
 237:bsp/src/bsp_key.c **** 							pBtn->RepeatCount = 0;
 372              		.loc 1 237 0
 373 00a8 1346     		mov	r3, r2
 374 00aa 0022     		movs	r2, #0
 375 00ac 1A73     		strb	r2, [r3, #12]
 238:bsp/src/bsp_key.c **** 							
 239:bsp/src/bsp_key.c **** 							bsp_PutKey((uint8_t)(3 * i + 1));
 376              		.loc 1 239 0
 377 00ae 04EB4404 		add	r4, r4, r4, lsl #1
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 12


 378              	.LVL21:
 379 00b2 601C     		adds	r0, r4, #1
 380 00b4 C0B2     		uxtb	r0, r0
 381 00b6 FFF7FEFF 		bl	_Z10bsp_PutKeyh
 382              	.LVL22:
 383 00ba 10E0     		b	.L22
 384              	.LVL23:
 385              	.L23:
 240:bsp/src/bsp_key.c **** 						}
 241:bsp/src/bsp_key.c **** 					}
 242:bsp/src/bsp_key.c **** 				}
 243:bsp/src/bsp_key.c **** 			}
 244:bsp/src/bsp_key.c **** 		}
 245:bsp/src/bsp_key.c **** 	}
 246:bsp/src/bsp_key.c **** 	else //key up
 247:bsp/src/bsp_key.c **** 	{
 248:bsp/src/bsp_key.c **** 		if(pBtn->Count > KEY_FILTER_TIME)
 386              		.loc 1 248 0
 387 00bc 154B     		ldr	r3, .L36
 388 00be 03EB0413 		add	r3, r3, r4, lsl #4
 389 00c2 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 390 00c4 052B     		cmp	r3, #5
 391 00c6 0BD9     		bls	.L29
 249:bsp/src/bsp_key.c **** 		{
 250:bsp/src/bsp_key.c **** 			pBtn->Count = KEY_FILTER_TIME;
 392              		.loc 1 250 0
 393 00c8 124B     		ldr	r3, .L36
 394 00ca 03EB0413 		add	r3, r3, r4, lsl #4
 395 00ce 0522     		movs	r2, #5
 396 00d0 1A71     		strb	r2, [r3, #4]
 397              	.L30:
 251:bsp/src/bsp_key.c **** 		}
 252:bsp/src/bsp_key.c **** 		else if(pBtn->Count != 0)
 253:bsp/src/bsp_key.c **** 		{
 254:bsp/src/bsp_key.c **** 			pBtn->Count--;
 255:bsp/src/bsp_key.c **** 		}
 256:bsp/src/bsp_key.c **** 		else
 257:bsp/src/bsp_key.c **** 		{
 258:bsp/src/bsp_key.c **** 			if (pBtn->State == 1)
 259:bsp/src/bsp_key.c **** 			{
 260:bsp/src/bsp_key.c **** 				pBtn->State = 0;
 261:bsp/src/bsp_key.c **** 
 262:bsp/src/bsp_key.c **** 				
 263:bsp/src/bsp_key.c **** 				bsp_PutKey((uint8_t)(3 * i + 2));
 264:bsp/src/bsp_key.c **** 			}
 265:bsp/src/bsp_key.c **** 		}
 266:bsp/src/bsp_key.c **** 
 267:bsp/src/bsp_key.c **** 		pBtn->LongCount = 0;
 398              		.loc 1 267 0
 399 00d2 104B     		ldr	r3, .L36
 400 00d4 03EB0414 		add	r4, r3, r4, lsl #4
 401              	.LVL24:
 402 00d8 0023     		movs	r3, #0
 403 00da E380     		strh	r3, [r4, #6]	@ movhi
 268:bsp/src/bsp_key.c **** 		pBtn->RepeatCount = 0;
 404              		.loc 1 268 0
 405 00dc 2373     		strb	r3, [r4, #12]
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 13


 406              	.L22:
 269:bsp/src/bsp_key.c **** 	}
 270:bsp/src/bsp_key.c **** }
 407              		.loc 1 270 0
 408 00de 10BD     		pop	{r4, pc}
 409              	.LVL25:
 410              	.L29:
 252:bsp/src/bsp_key.c **** 		{
 411              		.loc 1 252 0
 412 00e0 2BB1     		cbz	r3, .L31
 254:bsp/src/bsp_key.c **** 		}
 413              		.loc 1 254 0
 414 00e2 0C4A     		ldr	r2, .L36
 415 00e4 02EB0412 		add	r2, r2, r4, lsl #4
 416 00e8 013B     		subs	r3, r3, #1
 417 00ea 1371     		strb	r3, [r2, #4]
 418 00ec F1E7     		b	.L30
 419              	.L31:
 258:bsp/src/bsp_key.c **** 			{
 420              		.loc 1 258 0
 421 00ee 094B     		ldr	r3, .L36
 422 00f0 03EB0413 		add	r3, r3, r4, lsl #4
 423 00f4 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 424 00f6 012B     		cmp	r3, #1
 425 00f8 EBD1     		bne	.L30
 260:bsp/src/bsp_key.c **** 
 426              		.loc 1 260 0
 427 00fa 064B     		ldr	r3, .L36
 428 00fc 03EB0413 		add	r3, r3, r4, lsl #4
 429 0100 0022     		movs	r2, #0
 430 0102 9A72     		strb	r2, [r3, #10]
 263:bsp/src/bsp_key.c **** 			}
 431              		.loc 1 263 0
 432 0104 04EB4400 		add	r0, r4, r4, lsl #1
 433 0108 0230     		adds	r0, r0, #2
 434 010a C0B2     		uxtb	r0, r0
 435 010c FFF7FEFF 		bl	_Z10bsp_PutKeyh
 436              	.LVL26:
 437 0110 DFE7     		b	.L30
 438              	.L37:
 439 0112 00BF     		.align	2
 440              	.L36:
 441 0114 00000000 		.word	.LANCHOR1
 442              		.cfi_endproc
 443              	.LFE145:
 444              		.fnend
 446              		.section	.text._Z10bsp_GetKeyv,"ax",%progbits
 447              		.align	1
 448              		.global	_Z10bsp_GetKeyv
 449              		.syntax unified
 450              		.thumb
 451              		.thumb_func
 452              		.fpu fpv4-sp-d16
 454              	_Z10bsp_GetKeyv:
 455              		.fnstart
 456              	.LFB139:
  99:bsp/src/bsp_key.c **** 	uint8_t ret;
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 14


 457              		.loc 1 99 0
 458              		.cfi_startproc
 459              		@ args = 0, pretend = 0, frame = 0
 460              		@ frame_needed = 0, uses_anonymous_args = 0
 461              		@ link register save eliminated.
 102:bsp/src/bsp_key.c **** 	{
 462              		.loc 1 102 0
 463 0000 084A     		ldr	r2, .L41
 464 0002 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 465 0004 D27A     		ldrb	r2, [r2, #11]	@ zero_extendqisi2
 466 0006 9342     		cmp	r3, r2
 467 0008 0AD0     		beq	.L40
 108:bsp/src/bsp_key.c **** 
 468              		.loc 1 108 0
 469 000a 064A     		ldr	r2, .L41
 470 000c D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 471              	.LVL27:
 110:bsp/src/bsp_key.c **** 		{
 472              		.loc 1 110 0
 473 000e 0133     		adds	r3, r3, #1
 474 0010 DBB2     		uxtb	r3, r3
 475 0012 9372     		strb	r3, [r2, #10]
 476 0014 092B     		cmp	r3, #9
 477 0016 04D9     		bls	.L39
 112:bsp/src/bsp_key.c **** 		}
 478              		.loc 1 112 0
 479 0018 1346     		mov	r3, r2
 480 001a 0022     		movs	r2, #0
 481 001c 9A72     		strb	r2, [r3, #10]
 482 001e 7047     		bx	lr
 483              	.LVL28:
 484              	.L40:
 104:bsp/src/bsp_key.c **** 	}
 485              		.loc 1 104 0
 486 0020 0020     		movs	r0, #0
 487              	.L39:
 116:bsp/src/bsp_key.c **** 
 488              		.loc 1 116 0
 489 0022 7047     		bx	lr
 490              	.L42:
 491              		.align	2
 492              	.L41:
 493 0024 00000000 		.word	.LANCHOR0
 494              		.cfi_endproc
 495              	.LFE139:
 496              		.cantunwind
 497              		.fnend
 499              		.section	.text._Z15bsp_GetKeyState8KEY_ID_E,"ax",%progbits
 500              		.align	1
 501              		.global	_Z15bsp_GetKeyState8KEY_ID_E
 502              		.syntax unified
 503              		.thumb
 504              		.thumb_func
 505              		.fpu fpv4-sp-d16
 507              	_Z15bsp_GetKeyState8KEY_ID_E:
 508              		.fnstart
 509              	.LFB140:
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 15


 125:bsp/src/bsp_key.c **** 	return s_tBtn[_ucKeyID].State;
 510              		.loc 1 125 0
 511              		.cfi_startproc
 512              		@ args = 0, pretend = 0, frame = 0
 513              		@ frame_needed = 0, uses_anonymous_args = 0
 514              		@ link register save eliminated.
 515              	.LVL29:
 126:bsp/src/bsp_key.c **** }
 516              		.loc 1 126 0
 517 0000 024B     		ldr	r3, .L44
 518 0002 03EB0010 		add	r0, r3, r0, lsl #4
 519              	.LVL30:
 127:bsp/src/bsp_key.c **** 
 520              		.loc 1 127 0
 521 0006 807A     		ldrb	r0, [r0, #10]	@ zero_extendqisi2
 522 0008 7047     		bx	lr
 523              	.L45:
 524 000a 00BF     		.align	2
 525              	.L44:
 526 000c 00000000 		.word	.LANCHOR1
 527              		.cfi_endproc
 528              	.LFE140:
 529              		.cantunwind
 530              		.fnend
 532              		.section	.text._Z15bsp_SetKeyParamhth,"ax",%progbits
 533              		.align	1
 534              		.global	_Z15bsp_SetKeyParamhth
 535              		.syntax unified
 536              		.thumb
 537              		.thumb_func
 538              		.fpu fpv4-sp-d16
 540              	_Z15bsp_SetKeyParamhth:
 541              		.fnstart
 542              	.LFB141:
 130:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].LongTime       = _LongTime;		//0: don't detect long pressed event
 543              		.loc 1 130 0
 544              		.cfi_startproc
 545              		@ args = 0, pretend = 0, frame = 0
 546              		@ frame_needed = 0, uses_anonymous_args = 0
 547              		@ link register save eliminated.
 548              	.LVL31:
 131:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].RepeatSpeed    = _RepeatSpeed;		//0: don't support continuous send key value
 549              		.loc 1 131 0
 550 0000 034B     		ldr	r3, .L47
 551 0002 03EB0010 		add	r0, r3, r0, lsl #4
 552              	.LVL32:
 553 0006 0181     		strh	r1, [r0, #8]	@ movhi
 132:bsp/src/bsp_key.c **** 	s_tBtn[_ucKeyID].RepeatCount    = 0;						
 554              		.loc 1 132 0
 555 0008 C272     		strb	r2, [r0, #11]
 133:bsp/src/bsp_key.c **** }
 556              		.loc 1 133 0
 557 000a 0023     		movs	r3, #0
 558 000c 0373     		strb	r3, [r0, #12]
 134:bsp/src/bsp_key.c **** 
 559              		.loc 1 134 0
 560 000e 7047     		bx	lr
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 16


 561              	.L48:
 562              		.align	2
 563              	.L47:
 564 0010 00000000 		.word	.LANCHOR1
 565              		.cfi_endproc
 566              	.LFE141:
 567              		.cantunwind
 568              		.fnend
 570              		.section	.text._Z12bsp_ClearKeyv,"ax",%progbits
 571              		.align	1
 572              		.global	_Z12bsp_ClearKeyv
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 576              		.fpu fpv4-sp-d16
 578              	_Z12bsp_ClearKeyv:
 579              		.fnstart
 580              	.LFB142:
 143:bsp/src/bsp_key.c **** 	s_tKey.Read = s_tKey.Write;
 581              		.loc 1 143 0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 0
 584              		@ frame_needed = 0, uses_anonymous_args = 0
 585              		@ link register save eliminated.
 144:bsp/src/bsp_key.c **** }
 586              		.loc 1 144 0
 587 0000 014B     		ldr	r3, .L50
 588 0002 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 589 0004 9A72     		strb	r2, [r3, #10]
 145:bsp/src/bsp_key.c **** 
 590              		.loc 1 145 0
 591 0006 7047     		bx	lr
 592              	.L51:
 593              		.align	2
 594              	.L50:
 595 0008 00000000 		.word	.LANCHOR0
 596              		.cfi_endproc
 597              	.LFE142:
 598              		.cantunwind
 599              		.fnend
 601              		.section	.text._Z11bsp_KeyScanv,"ax",%progbits
 602              		.align	1
 603              		.global	_Z11bsp_KeyScanv
 604              		.syntax unified
 605              		.thumb
 606              		.thumb_func
 607              		.fpu fpv4-sp-d16
 609              	_Z11bsp_KeyScanv:
 610              		.fnstart
 611              	.LFB146:
 271:bsp/src/bsp_key.c **** 
 272:bsp/src/bsp_key.c **** /**
 273:bsp/src/bsp_key.c ****   * @brief  Scan all key
 274:bsp/src/bsp_key.c ****   * @param  None
 275:bsp/src/bsp_key.c ****   * @retval None
 276:bsp/src/bsp_key.c ****   */
 277:bsp/src/bsp_key.c **** void bsp_KeyScan(void)
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 17


 278:bsp/src/bsp_key.c **** {
 612              		.loc 1 278 0
 613              		.cfi_startproc
 614              		@ args = 0, pretend = 0, frame = 0
 615              		@ frame_needed = 0, uses_anonymous_args = 0
 616 0000 10B5     		push	{r4, lr}
 617              		.save {r4, lr}
 618              	.LCFI5:
 619              		.cfi_def_cfa_offset 8
 620              		.cfi_offset 4, -8
 621              		.cfi_offset 14, -4
 622              	.LVL33:
 279:bsp/src/bsp_key.c **** 	uint8_t i;
 280:bsp/src/bsp_key.c **** 
 281:bsp/src/bsp_key.c **** 	for (i = 0; i < KEY_COUNT; i++)
 623              		.loc 1 281 0
 624 0002 0024     		movs	r4, #0
 625              	.LVL34:
 626              	.L54:
 627              		.loc 1 281 0 is_stmt 0 discriminator 3
 628 0004 2CB9     		cbnz	r4, .L52
 282:bsp/src/bsp_key.c **** 	{
 283:bsp/src/bsp_key.c **** 		bsp_DetectKey(i);
 629              		.loc 1 283 0 is_stmt 1 discriminator 2
 630 0006 2046     		mov	r0, r4
 631 0008 FFF7FEFF 		bl	_ZL13bsp_DetectKeyh
 632              	.LVL35:
 281:bsp/src/bsp_key.c **** 	{
 633              		.loc 1 281 0 discriminator 2
 634 000c 0134     		adds	r4, r4, #1
 635              	.LVL36:
 636 000e E4B2     		uxtb	r4, r4
 637              	.LVL37:
 638 0010 F8E7     		b	.L54
 639              	.L52:
 284:bsp/src/bsp_key.c **** 	}
 285:bsp/src/bsp_key.c **** }
 640              		.loc 1 285 0
 641 0012 10BD     		pop	{r4, pc}
 642              		.cfi_endproc
 643              	.LFE146:
 644              		.fnend
 646              		.section	.bss._ZL6s_tBtn,"aw",%nobits
 647              		.align	2
 648              		.set	.LANCHOR1,. + 0
 651              	_ZL6s_tBtn:
 652 0000 00000000 		.space	16
 652      00000000 
 652      00000000 
 652      00000000 
 653              		.section	.bss._ZL6s_tKey,"aw",%nobits
 654              		.align	2
 655              		.set	.LANCHOR0,. + 0
 658              	_ZL6s_tKey:
 659 0000 00000000 		.space	13
 659      00000000 
 659      00000000 
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 18


 659      00
 660              		.text
 661              	.Letext0:
 662              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h
 663              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/machine/_default_types
 664              		.file 4 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/sys/_stdint.h"
 665              		.file 5 "../Libraries/CMSIS/CM4/CoreSupport/core_cm4.h"
 666              		.file 6 "../Libraries/CMSIS/CM4/DeviceSupport/system_at32f4xx.h"
 667              		.file 7 "../Libraries/CMSIS/CM4/DeviceSupport/at32f4xx.h"
 668              		.file 8 "../Libraries/AT32F4xx_StdPeriph_Driver/inc/at32f4xx_gpio.h"
 669              		.file 9 "Inc/FreeRTOSConfig.h"
 670              		.file 10 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/sys/lock.h"
 671              		.file 11 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/sys/_types.h"
 672              		.file 12 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/sys/reent.h"
 673              		.file 13 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/c++/7.3.1/cstdlib"
 674              		.file 14 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/c++/7.3.1/arm-none-ea
 675              		.file 15 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/stdlib.h"
 676              		.file 16 "/usr/local/Cellar/gcc-arm-none-eabi/20180627/arm-none-eabi/include/c++/7.3.1/stdlib.h"
 677              		.file 17 "bsp/inc/bsp_key.h"
 678              		.file 18 "../Libraries/AT32F4xx_StdPeriph_Driver/inc/at32f4xx_rcc.h"
 679              		.file 19 "<built-in>"
ARM GAS  /var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bsp_key.c
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:17     .text._ZL10IsKeyDown1v:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:23     .text._ZL10IsKeyDown1v:0000000000000000 _ZL10IsKeyDown1v
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:48     .text._ZL10IsKeyDown1v:0000000000000014 $d
 .ARM.exidx.text._ZL10IsKeyDown1v:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:55     .text._ZL14bsp_InitKeyVarv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:61     .text._ZL14bsp_InitKeyVarv:0000000000000000 _ZL14bsp_InitKeyVarv
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:111    .text._ZL14bsp_InitKeyVarv:0000000000000030 $d
.ARM.exidx.text._ZL14bsp_InitKeyVarv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:120    .text._ZL15bsp_InitKeyHardv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:126    .text._ZL15bsp_InitKeyHardv:0000000000000000 _ZL15bsp_InitKeyHardv
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:170    .text._ZL15bsp_InitKeyHardv:000000000000002c $d
.ARM.exidx.text._ZL15bsp_InitKeyHardv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:176    .text._Z11bsp_InitKeyv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:183    .text._Z11bsp_InitKeyv:0000000000000000 _Z11bsp_InitKeyv
 .ARM.extab.text._Z11bsp_InitKeyv:0000000000000000 $d
 .ARM.exidx.text._Z11bsp_InitKeyv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:209    .text._Z10bsp_PutKeyh:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:216    .text._Z10bsp_PutKeyh:0000000000000000 _Z10bsp_PutKeyh
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:245    .text._Z10bsp_PutKeyh:0000000000000018 $d
  .ARM.exidx.text._Z10bsp_PutKeyh:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:252    .text._ZL13bsp_DetectKeyh:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:258    .text._ZL13bsp_DetectKeyh:0000000000000000 _ZL13bsp_DetectKeyh
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:441    .text._ZL13bsp_DetectKeyh:0000000000000114 $d
.ARM.exidx.text._ZL13bsp_DetectKeyh:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:447    .text._Z10bsp_GetKeyv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:454    .text._Z10bsp_GetKeyv:0000000000000000 _Z10bsp_GetKeyv
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:493    .text._Z10bsp_GetKeyv:0000000000000024 $d
  .ARM.exidx.text._Z10bsp_GetKeyv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:500    .text._Z15bsp_GetKeyState8KEY_ID_E:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:507    .text._Z15bsp_GetKeyState8KEY_ID_E:0000000000000000 _Z15bsp_GetKeyState8KEY_ID_E
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:526    .text._Z15bsp_GetKeyState8KEY_ID_E:000000000000000c $d
.ARM.exidx.text._Z15bsp_GetKeyState8KEY_ID_E:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:533    .text._Z15bsp_SetKeyParamhth:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:540    .text._Z15bsp_SetKeyParamhth:0000000000000000 _Z15bsp_SetKeyParamhth
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:564    .text._Z15bsp_SetKeyParamhth:0000000000000010 $d
.ARM.exidx.text._Z15bsp_SetKeyParamhth:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:571    .text._Z12bsp_ClearKeyv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:578    .text._Z12bsp_ClearKeyv:0000000000000000 _Z12bsp_ClearKeyv
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:595    .text._Z12bsp_ClearKeyv:0000000000000008 $d
.ARM.exidx.text._Z12bsp_ClearKeyv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:602    .text._Z11bsp_KeyScanv:0000000000000000 $t
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:609    .text._Z11bsp_KeyScanv:0000000000000000 _Z11bsp_KeyScanv
 .ARM.exidx.text._Z11bsp_KeyScanv:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:647    .bss._ZL6s_tBtn:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:651    .bss._ZL6s_tBtn:0000000000000000 _ZL6s_tBtn
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:654    .bss._ZL6s_tKey:0000000000000000 $d
/var/folders/l3/4y5292px21b4835bsnjwqc7w009kq1/T//cc2h26pk.s:658    .bss._ZL6s_tKey:0000000000000000 _ZL6s_tKey

UNDEFINED SYMBOLS
RCC_APB2PeriphClockCmd
GPIO_Init
__aeabi_unwind_cpp_pr0
__aeabi_unwind_cpp_pr1
